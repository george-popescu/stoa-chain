---
phase: 06-regenerate-genesis-payloads-with-updated-multi-sig-governance-new-modules-and-2026-02-24t19-00-00z-genesis-time
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pact/genesis/stoa/stoa-genesis-1.pact
  - pact/genesis/stoa/stoa-genesis-1.json
  - pact/genesis/stoa/stoa-genesis-1.yaml
  - pact/genesis/stoa/stoa-genesis-2.pact
  - pact/genesis/stoa/stoa-genesis-2.json
  - pact/genesis/stoa/stoa-genesis-2.yaml
  - pact/genesis/stoa/stoa-genesis-3.pact
  - pact/genesis/stoa/stoa-genesis-3.yaml
  - pact/genesis/stoa/stoa-genesis-4.pact
  - pact/genesis/stoa/stoa-genesis-4.json
  - pact/genesis/stoa/stoa-genesis-4-chain0.yaml
  - pact/genesis/stoa/stoa-genesis-4-no-init.pact
  - pact/genesis/stoa/stoa-genesis-4-chains1-9.yaml
  - pact/genesis/stoa/stoa-genesis-5.pact
  - pact/genesis/stoa/stoa-genesis-5.yaml
  - src/Chainweb/Version/Stoa.hs
autonomous: true
requirements:
  - GEN-06
must_haves:
  truths:
    - "All 5 Mihai pact files exist in pact/genesis/stoa/ with correct content"
    - "stoa-genesis-4.pact has GENESIS-TIME set to 2026-02-24T19:00:00Z"
    - "stoa-genesis-4-no-init.pact exists without A_InitialiseStoaChain lines"
    - "6 YAML wrappers exist with correct codeFile/dataFile references"
    - "_genesisTime in Stoa.hs is 2026-02-24T19:00:00.000000"
  artifacts:
    - path: "pact/genesis/stoa/stoa-genesis-1.yaml"
      provides: "YAML wrapper for tx1 (ns module)"
      contains: "codeFile: stoa-genesis-1.pact"
    - path: "pact/genesis/stoa/stoa-genesis-4-chain0.yaml"
      provides: "YAML wrapper for tx4 chain 0 (coin + init)"
      contains: "codeFile: stoa-genesis-4.pact"
    - path: "pact/genesis/stoa/stoa-genesis-4-chains1-9.yaml"
      provides: "YAML wrapper for tx4 chains 1-9 (coin only)"
      contains: "codeFile: stoa-genesis-4-no-init.pact"
    - path: "src/Chainweb/Version/Stoa.hs"
      provides: "Updated genesis time constant"
      contains: "2026-02-24T19:00:00.000000"
  key_links:
    - from: "pact/genesis/stoa/stoa-genesis-1.yaml"
      to: "pact/genesis/stoa/stoa-genesis-1.pact"
      via: "codeFile reference"
      pattern: "codeFile: stoa-genesis-1.pact"
    - from: "pact/genesis/stoa/stoa-genesis-4.pact"
      to: "src/Chainweb/Version/Stoa.hs"
      via: "GENESIS-TIME must match _genesisTime"
      pattern: "2026-02-24T19:00:00"
---

<objective>
Copy Mihai's 5 new genesis pact files into the Stoa genesis directory, create YAML wrappers for the Ea tool, create the chain-0/chains-1-9 split for transaction 4, and update both GENESIS-TIME constants (pact and Haskell) to 2026-02-24T19:00:00Z.

Purpose: Replace the old 4-transaction genesis architecture with the new 5-transaction architecture that includes namespaced interfaces, multi-sig governance with stoic-predicates, util modules, and stoic-xchain.

Output: 6 pact files, 3 JSON data files, 6 YAML wrappers, and updated Stoa.hs genesis time â€” all ready for the Ea tool to consume.
</objective>

<execution_context>
@/Users/codera/.claude/get-shit-done/workflows/execute-plan.md
@/Users/codera/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-regenerate-genesis-payloads-with-updated-multi-sig-governance-new-modules-and-2026-02-24t19-00-00z-genesis-time/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Copy pact files from Mihai's genesis_stoa_update, create chain-0/chains-1-9 split, and update GENESIS-TIME</name>
  <files>
    pact/genesis/stoa/stoa-genesis-1.pact
    pact/genesis/stoa/stoa-genesis-1.json
    pact/genesis/stoa/stoa-genesis-2.pact
    pact/genesis/stoa/stoa-genesis-2.json
    pact/genesis/stoa/stoa-genesis-3.pact
    pact/genesis/stoa/stoa-genesis-4.pact
    pact/genesis/stoa/stoa-genesis-4.json
    pact/genesis/stoa/stoa-genesis-4-no-init.pact
    pact/genesis/stoa/stoa-genesis-5.pact
  </files>
  <action>
    1. Copy all files from `/Users/codera/Development/Stoa/genesis_stoa_update/` to `pact/genesis/stoa/`:
       - `stoa-genesis-1.pact` (as-is)
       - `stoa-genesis-1.json` (as-is)
       - `stoa-genesis-2.pact` (as-is)
       - `stoa-genesis-2.json` (as-is)
       - `stoa-genesis-3.pact` (as-is)
       - `stoa-genesis-4.pact` (then modify GENESIS-TIME)
       - `stoa-genesis-4.json` (as-is)
       - `stoa-genesis-5.pact` (as-is)

    2. In `pact/genesis/stoa/stoa-genesis-4.pact`, find the line:
       `(defconst GENESIS-TIME (time "2026-02-18T21:30:00Z"))`
       Replace with:
       `(defconst GENESIS-TIME (time "2026-02-24T19:00:00Z"))`

    3. Create `pact/genesis/stoa/stoa-genesis-4-no-init.pact`:
       Copy `stoa-genesis-4.pact` but REMOVE the last lines after table creation that contain:
       - `(define-keyset "stoa-foundation-keyset" ...)`
       - `(A_InitialiseStoaChain ...)`
       The file should end after the `(create-table ...)` statements. This is needed because `A_InitialiseStoaChain` calls `UEV_ChainZero` which enforces chain-id == "0", so running the full file on chains 1-9 would fail.

    4. Verify file counts: 5 .pact files (plus stoa-genesis-4-no-init.pact = 6 total), 3 .json files.
  </action>
  <verify>
    - `ls pact/genesis/stoa/stoa-genesis-*.pact | wc -l` should return 6
    - `ls pact/genesis/stoa/stoa-genesis-*.json | wc -l` should return 3
    - `grep "2026-02-24T19:00:00Z" pact/genesis/stoa/stoa-genesis-4.pact` should match
    - `grep "2026-02-24T19:00:00Z" pact/genesis/stoa/stoa-genesis-4-no-init.pact` should match
    - `grep "A_InitialiseStoaChain" pact/genesis/stoa/stoa-genesis-4-no-init.pact` should produce NO output (removed)
    - `grep "A_InitialiseStoaChain" pact/genesis/stoa/stoa-genesis-4.pact` should produce output (retained)
  </verify>
  <done>All 6 pact files and 3 JSON data files exist in pact/genesis/stoa/. GENESIS-TIME is 2026-02-24T19:00:00Z in both stoa-genesis-4.pact variants. The no-init variant has no A_InitialiseStoaChain call.</done>
</task>

<task type="auto">
  <name>Task 2: Create 6 YAML wrappers and update Stoa.hs genesis time</name>
  <files>
    pact/genesis/stoa/stoa-genesis-1.yaml
    pact/genesis/stoa/stoa-genesis-2.yaml
    pact/genesis/stoa/stoa-genesis-3.yaml
    pact/genesis/stoa/stoa-genesis-4-chain0.yaml
    pact/genesis/stoa/stoa-genesis-4-chains1-9.yaml
    pact/genesis/stoa/stoa-genesis-5.yaml
    src/Chainweb/Version/Stoa.hs
  </files>
  <action>
    1. Create 6 YAML wrappers in `pact/genesis/stoa/`. Use `dataFile` for JSON data references (cleaner than inlining). The `codeFile` and `dataFile` paths are relative to the YAML file location:

       **stoa-genesis-1.yaml:**
       ```yaml
       codeFile: stoa-genesis-1.pact
       dataFile: stoa-genesis-1.json
       nonce: stoa-genesis-1
       keyPairs: []
       ```

       **stoa-genesis-2.yaml:**
       ```yaml
       codeFile: stoa-genesis-2.pact
       dataFile: stoa-genesis-2.json
       nonce: stoa-genesis-2
       keyPairs: []
       ```

       **stoa-genesis-3.yaml:** (no data needed)
       ```yaml
       codeFile: stoa-genesis-3.pact
       nonce: stoa-genesis-3
       keyPairs: []
       ```

       **stoa-genesis-4-chain0.yaml:** (with foundation keyset data)
       ```yaml
       codeFile: stoa-genesis-4.pact
       dataFile: stoa-genesis-4.json
       nonce: stoa-genesis-4-chain0
       keyPairs: []
       ```

       **stoa-genesis-4-chains1-9.yaml:** (no data, uses trimmed pact file)
       ```yaml
       codeFile: stoa-genesis-4-no-init.pact
       nonce: stoa-genesis-4-chains1-9
       keyPairs: []
       ```

       **stoa-genesis-5.yaml:** (no data)
       ```yaml
       codeFile: stoa-genesis-5.pact
       nonce: stoa-genesis-5
       keyPairs: []
       ```

    2. Update `src/Chainweb/Version/Stoa.hs`:
       Find: `_genesisTime = AllChains $ BlockCreationTime [timeMicrosQQ| 2026-02-01T00:00:00.000000 |]`
       Replace with: `_genesisTime = AllChains $ BlockCreationTime [timeMicrosQQ| 2026-02-24T19:00:00.000000 |]`

       This MUST match the GENESIS-TIME in stoa-genesis-4.pact exactly (same date/time).

    3. Verify all YAML files parse correctly (no YAML syntax errors) by checking they have valid structure.
  </action>
  <verify>
    - `ls pact/genesis/stoa/stoa-genesis-*.yaml | wc -l` should return 6 (1, 2, 3, 4-chain0, 4-chains1-9, 5)
    - `grep "2026-02-24T19:00:00" src/Chainweb/Version/Stoa.hs` should match
    - Each YAML file should contain `codeFile:` pointing to an existing .pact file
    - stoa-genesis-1.yaml and stoa-genesis-2.yaml and stoa-genesis-4-chain0.yaml should have `dataFile:` entries
    - stoa-genesis-3.yaml, stoa-genesis-4-chains1-9.yaml, stoa-genesis-5.yaml should NOT have `dataFile:` entries
  </verify>
  <done>6 YAML wrappers exist with correct codeFile/dataFile references. Stoa.hs genesis time is 2026-02-24T19:00:00.000000, matching the contract's GENESIS-TIME.</done>
</task>

</tasks>

<verification>
1. File inventory: 6 .pact, 3 .json, 6 .yaml files in pact/genesis/stoa/ with stoa-genesis- prefix
2. GENESIS-TIME consistency: `grep "2026-02-24T19:00:00" pact/genesis/stoa/stoa-genesis-4.pact src/Chainweb/Version/Stoa.hs` both match
3. Chain split: stoa-genesis-4.pact has A_InitialiseStoaChain; stoa-genesis-4-no-init.pact does not
4. YAML integrity: all 6 YAML files reference existing .pact files via codeFile
</verification>

<success_criteria>
- All Mihai genesis files copied with correct content
- GENESIS-TIME updated to 2026-02-24T19:00:00Z in both pact contract and Haskell version
- Chain 0 / chains 1-9 split implemented via separate pact file and YAML wrapper
- 6 YAML wrappers ready for Ea tool consumption
</success_criteria>

<output>
After completion, create `.planning/phases/06-regenerate-genesis-payloads-with-updated-multi-sig-governance-new-modules-and-2026-02-24t19-00-00z-genesis-time/06-01-SUMMARY.md`
</output>
